import{c as o,o as r,a as O,b as e,r as v,w as D,d as M,e as V,f as h,g as A,v as z,F as T,h as I,t as _,i as C,A as j,u as E,j as f,k,l as u,m as F,n as N,p as H,q as S,T as q,s as K,x as U,R as P}from"./index-CqXOPxsQ.js";import{u as R,a as B,b as L}from"./modal-DSVCbhfM.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 287 304"};function Y(g,a){return r(),o("svg",G,[...a[0]||(a[0]=[O('<rect width="278" height="295" x="4.5" y="4.5" stroke="#009799" stroke-width="12" rx="24.5"></rect><rect width="202.332" height="31.265" x="16" y="256.41" fill="#009799" rx="15.632" transform="rotate(-45 16 256.41)"></rect><circle cx="85.851" cy="87" r="57" stroke="#009799" stroke-width="14"></circle><circle cx="199.851" cy="216" r="57" stroke="#009799" stroke-width="14"></circle><path fill="#009799" d="M149.851 273a7 7 0 1 1-14 0v-82.355l14-14zm0-106.256-14 14v-44.099l14-14zm-7-143.744a7 7 0 0 1 7 7v82.744l-14 14V30a7 7 0 0 1 7-7"></path>',5)])])}const J={render:Y},Q={xmlns:"http://www.w3.org/2000/svg"};function W(g,a){return r(),o("svg",Q,[...a[0]||(a[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},[e("path",{fill:"#009799",d:"M59.061 20.976c0 .85-.46 1.61-1.196 2.024l-10.418 5.703-5.704 10.419a2.28 2.28 0 0 1-2 1.196c-.852 0-1.61-.46-2.025-1.196l-5.703-10.419L21.619 23a2.27 2.27 0 0 1-1.195-2.024c0-.828.436-1.61 1.195-2.001l10.396-5.704 5.703-10.418c.805-1.472 3.243-1.472 4.025 0l5.704 10.418 10.418 5.704a2.28 2.28 0 0 1 1.196 2m9.706 31.439c0 .85-.46 1.61-1.196 2.024l-7.199 3.932-3.933 7.222a2.34 2.34 0 0 1-2.024 1.196c-.85 0-1.61-.46-2.023-1.196l-3.933-7.222-7.222-3.932a2.31 2.31 0 0 1-1.196-2.024c0-.828.46-1.61 1.196-2.001l7.222-3.956 3.933-7.198c.805-1.472 3.242-1.472 4.047 0l3.933 7.198 7.199 3.956a2.28 2.28 0 0 1 1.196 2",class:"svgShape color000000-0 selectable"}),e("path",{fill:"#757575",d:"M21.194 98.251a2.3 2.3 0 0 1-2.3-2.3V80.423c-5.098-1.065-8.938-5.595-8.938-11.003V40.207c0-6.197 5.042-11.24 11.238-11.24h4.968a2.3 2.3 0 1 1 0 4.6h-4.968a6.646 6.646 0 0 0-6.639 6.64V69.42c0 3.66 2.979 6.639 6.64 6.639 1.27 0 2.3 1.028 2.3 2.3v12.397l15.535-14.1a2.3 2.3 0 0 1 1.545-.597h38.23c3.661 0 6.64-2.978 6.64-6.64V40.208c0-3.661-2.979-6.64-6.64-6.64H53.76c-1.272 0-2.3-1.028-2.3-2.3s1.028-2.3 2.3-2.3h25.047c6.196 0 11.238 5.043 11.238 11.24V69.42c0 6.196-5.042 11.239-11.238 11.239H41.462L22.74 97.654a2.3 2.3 0 0 1-1.546.597",class:"svgShape color000000-1 selectable"})],-1)])])}const X={render:W},Z={class:"w-[390px] my-[10px]"},ee={key:0,class:"absolute left-1/2 -translate-x-1/2 mt[-1px] max-h-[600px] overflow-scroll w-[750px] bg-white rounded custom-shadow z-10"},te={key:0,class:"py-[10px] text-[12px] text-center"},se={key:1,class:"py-2.5 px-2.5 text-[12px]"},oe={key:0,class:"text-center"},re={key:1},ae={class:"flex gap-3"},le=["src"],ne={class:"flex flex-col"},ie={class:"text-[13.5px] font-normal"},de={class:"text-gray-500"},ue=["onClick"],ce={__name:"BookSearchComponent",setup(g){const a=R(),c=v(null),d=v(!1),n=v(""),l=v([]),b=v(!1),m=B();let s;D(n,p=>{if(!p){l.value=[];return}b.value=!0,clearTimeout(s),s=setTimeout(async()=>{try{const t=await C.get(`${j}/books/search`,{params:{q:p},withCredentials:!0});l.value=t.data.data}catch{l.value=[]}b.value=!1},400)});async function i(p){try{await C.post(`${j}/books/save`,p,{withCredentials:!0}),l.value=l.value.filter(t=>t.id!==p.id),await a.fetchUserLibrary(),m.showToast({message:"Book has been added",type:"success",duration:5e3})}catch{m.showToast({message:"Book could not be added, please try again",type:"error",duration:5e3})}}const y=p=>{c.value&&!c.value.contains(p.target)&&(d.value=!1,n.value="")};return M(()=>{document.addEventListener("mousedown",y)}),V(()=>{document.removeEventListener("mousedown",y)}),(p,t)=>(r(),o("div",{class:"relative",ref_key:"dropdownRef",ref:c},[e("div",Z,[A(e("input",{onFocus:t[0]||(t[0]=x=>d.value=!0),"onUpdate:modelValue":t[1]||(t[1]=x=>n.value=x),type:"text",class:"w-full border border-[#cfd7e6] rounded-sm h-[34px] py-3 px-6 outline-0 bg-white text-sm text-gray-800",placeholder:"Search for your favourite book, research paper..."},null,544),[[z,n.value]])]),d.value?(r(),o("div",ee,[b.value?(r(),o("div",te,[...t[2]||(t[2]=[e("p",null,"Loading...",-1)])])):(r(),o("div",se,[l.value.length===0?(r(),o("div",oe,[...t[3]||(t[3]=[e("p",null,"Nothing to show",-1)])])):(r(),o("ul",re,[(r(!0),o(T,null,I(l.value,x=>(r(),o("li",{key:x.id,class:"flex items-center justify-between px-4 py-2 border-b border-gray-200"},[e("div",ae,[e("img",{src:x.volumeInfo.imageLinks.smallThumbnail,alt:"",class:"h-[90px] w-auto object-contain"},null,8,le),e("div",ne,[e("span",ie,_(x.volumeInfo.title),1),e("span",de,"by- "+_(x.volumeInfo.authors&&x.volumeInfo.authors.length?x.volumeInfo.authors.join(", "):"Unknown"),1)])]),e("button",{onClick:w=>i(x),class:"text-white px-3 py-1 text-xs cursor-pointer hover:bg-gray-100 flex items-center",title:"Add this book to your library"},[...t[4]||(t[4]=[e("span",{class:"material-symbols-outlined text-[#009799]"}," add_circle ",-1)])],8,ue)]))),128))]))]))])):h("",!0)],512))}},pe=$(ce,[["__scopeId","data-v-70290ca5"]]),xe={class:"sticky top-0 z-500"},me={class:"bg-white px-[15px] flex items-center justify-between"},fe={class:"flex text-[#009799] gap-1 items-center my-[10px] pl-0 ml-0"},ve={class:"flex gap-3 items-center"},ye={key:0,class:"absolute right-0 mt-2 w-[240px] bg-white rounded custom-shadow z-10 overflow-hidden"},be={class:"text-[14px] font-light"},ge={class:"border-b border-gray-100 text-[#009799]"},_e={class:"border-b border-gray-100 text-[#009799]"},he={class:"border-b border-gray-100 text-[#009799]"},we={class:"rounded-full overflow-hidden w-[30px] h-[30px] bg-gray-300 flex items-center justify-center"},ke=["src","alt"],$e={key:1,class:"material-symbols-outlined text-white"},Ce={key:0,class:"absolute right-0 mt-2 w-[240px] bg-white rounded custom-shadow z-10 overflow-hidden"},je={class:"text-[14px] font-light"},Be={class:"border-b border-gray-100"},Le={class:"rounded-full overflow-hidden w-[45px] h-[45px] bg-gray-300 flex items-center justify-center mb-2.5"},Se=["src","alt"],Te={key:1,class:"material-symbols-outlined text-white"},Ie={class:"mb-1"},Re={class:"text-[13px] block text-center w-full overflow-ellipsis truncate text-gray-500"},Ue={class:"border-b border-gray-100 text-[#009799]"},Me={__name:"NavBar",setup(g){const a=E(),c=L(),d=H(),n=v(!1),l=v(!1),b=p=>{m.value&&!m.value.contains(p.target)&&(n.value=!1),s.value&&!s.value.contains(p.target)&&(l.value=!1)},m=v(null),s=v(null);M(()=>{document.addEventListener("mousedown",b)}),V(()=>{document.removeEventListener("mousedown",b)});const i=async()=>{n.value=!1,c.open("loading"),await new Promise(p=>setTimeout(p,2500)),await a.logout(),c.close(),d.push("/")},y=()=>{c.open("agent_modal")};return(p,t)=>{const x=F("RouterLink");return r(),o("div",xe,[e("div",me,[f(x,{to:{name:"Dashboard"}},{default:k(()=>[e("div",fe,[f(u(J),{class:"w-8 h-8"}),t[6]||(t[6]=e("h1",{class:"font-bold text-base"},"KOOB",-1))])]),_:1}),f(pe),e("div",ve,[e("div",{onClick:y,class:"cursor-pointer my-[10px] flex items-center"},[t[7]||(t[7]=e("p",{class:"text-[13px] mr-1.5"},"Try Ai agent!",-1)),f(u(X),{class:"w-[30px] h-[30px]"})]),e("div",{class:"relative",ref_key:"dropdownRef2",ref:s},[e("div",{onClick:t[0]||(t[0]=w=>l.value=!l.value),class:"cursor-pointer my-[10px]"},[...t[8]||(t[8]=[e("div",{class:"rounded-full overflow-hidden w-[30px] h-[30px] flex items-center justify-center"},[e("span",{class:"material-symbols-outlined text-[#009799]"}," dashboard ")],-1)])]),l.value?(r(),o("div",ye,[e("ul",be,[e("li",ge,[f(x,{to:{name:"Dashboard"},class:"cursor-pointer px-4 py-2 hover:bg-gray-50 flex items-center gap-2.5 active:border-[1.5px] rounded m-0.5 active:border-[#009799]",onClick:t[1]||(t[1]=w=>l.value=!1)},{default:k(()=>[...t[9]||(t[9]=[e("span",{class:"material-symbols-outlined"}," view_apps ",-1),e("span",null,"Dashboard",-1)])]),_:1})]),e("li",_e,[f(x,{to:{name:"Settings"},class:"cursor-pointer px-4 py-2 hover:bg-gray-50 flex items-center gap-2.5 pointer-events-none opacity-60",onClick:t[2]||(t[2]=w=>l.value=!1),"aria-disabled":"true",tabindex:"-1"},{default:k(()=>[...t[10]||(t[10]=[e("span",{class:"material-symbols-outlined"}," view_in_ar ",-1),e("span",null,"Browse Boxes",-1),e("small",{class:"ml-2 px-2 py-0.5 rounded bg-yellow-100 text-yellow-700 text-[9px] font-semibold"},"Unavailable",-1)])]),_:1})]),e("li",he,[f(x,{to:{name:"Settings"},class:"cursor-pointer px-4 py-2 hover:bg-gray-50 flex items-center gap-2.5 pointer-events-none opacity-60",onClick:t[3]||(t[3]=w=>l.value=!1),"aria-disabled":"true",tabindex:"-1"},{default:k(()=>[...t[11]||(t[11]=[e("span",{class:"material-symbols-outlined"}," note_stack ",-1),e("span",null,"Browse Libraries",-1),e("small",{class:"ml-2 px-2 py-0.5 rounded bg-yellow-100 text-yellow-700 text-[9px] font-semibold"},"Unavailable",-1)])]),_:1})])])])):h("",!0)],512),e("div",{class:"relative",ref_key:"dropdownRef",ref:m},[e("div",{onClick:t[4]||(t[4]=w=>n.value=!n.value),class:"cursor-pointer my-[10px]"},[e("div",we,[u(a).user?.pictureUrl?(r(),o("img",{key:0,src:u(a).user.pictureUrl,alt:u(a).user?.name,class:"w-full h-full object-cover"},null,8,ke)):(r(),o("span",$e," contacts_product "))])]),n.value?(r(),o("div",Ce,[e("ul",je,[e("li",Be,[f(x,{to:{name:"Settings"},class:"cursor-pointer flex flex-col items-center justify-center px-2.5 py-5 border-[1.5px] border-[#009799] rounded m-0.5",onClick:t[5]||(t[5]=w=>n.value=!1)},{default:k(()=>[e("div",Le,[u(a).user?.pictureUrl?(r(),o("img",{key:0,src:u(a).user?.pictureUrl,alt:u(a).user?.name,class:"w-full h-full object-cover"},null,8,Se)):(r(),o("span",Te," contacts_product "))]),e("p",Ie,_(u(a).user?.name),1),e("p",Re,_(u(a).user?.email),1)]),_:1})]),e("li",Ue,[e("a",{class:"cursor-pointer px-4 py-2 hover:bg-gray-50 flex items-center gap-2.5",onClick:N(i,["prevent"])},[...t[12]||(t[12]=[e("span",{class:"material-symbols-outlined"}," trending_flat ",-1),e("span",null,"Sign Out",-1)])])])])])):h("",!0)],512)])]),t[13]||(t[13]=e("div",{class:"w-full h-0.5 bg-gradient-to-r from-[#009799] to-yellow-900"},null,-1))])}}},Ve=$(Me,[["__scopeId","data-v-89185686"]]),Ae={key:0},ze={__name:"LoadingModal",setup(g){const a=L();return(c,d)=>u(a).isOpen&&u(a).type==="loading"?(r(),o("div",Ae,[...d[0]||(d[0]=[e("div",{class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50"},[e("div",{class:"bg-white rounded-lg p-8 shadow-lg flex flex-col items-center"},[e("span",{class:"material-symbols-outlined text-[#009799] a1 animate-spin"},"clock_loader_10")])],-1)])])):h("",!0)}},Ee=$(ze,[["__scopeId","data-v-db0e5431"]]),Ne={class:"z-49"},Oe={class:"max-w-[1200px] flex items-center justify-between flex-wrap font-light w-full"},De={class:"w-full py-2.5 flex"},Fe={class:"material-symbols-outlined mr-2"},He={class:"text-[15px]"},qe={__name:"EventNotifyBar",setup(g){const a=B(),c=d=>d==="success"?"bg-green-200 text-green-800":d==="error"?"bg-red-200 text-red-800":"bg-blue-200 text-blue-800";return(d,n)=>(r(),o("div",Ne,[f(q,{name:"slide-down",tag:"div"},{default:k(()=>[(r(!0),o(T,null,I(u(a).toasts,l=>(r(),o("div",{key:l.id,class:S(`${c(l.type)} flex justify-center`)},[e("div",Oe,[e("div",De,[e("span",Fe,_(l.type==="success"?"task_alt":l.type==="error"?"error":"info"),1),e("span",He,_(l.message),1)])])],2))),128))]),_:1})]))}},Ke=$(qe,[["__scopeId","data-v-1267e574"]]),Pe={key:0},Ge={class:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center"},Ye={class:"bg-white rounded-[5px] shadow-[0_0_0_2px_#009799] w-full max-w-[800px] min-h-[400px] overflow-scroll max-h-[700px] flex flex-col"},Je={class:"px-5 py-4 border-b border-gray-200 flex items-center justify-between"},Qe={class:"flex-1 px-5 py-4 overflow-y-auto bg-gray-50"},We={key:0,class:"flex justify-start mb-3"},Xe=["disabled"],Ze=["disabled"],et={__name:"AgentModal",setup(g){const a=R();B();const c=v([{sender:"agent",text:"Hi! I am your AI agent. I can help you with searching for books, and adding books to your library. How can i help you today. Remember due to limits you only can use me 5 times in a day."}]),d=v(""),n=v(!1),l=v("");async function b(){if(d.value.trim()){c.value.push({sender:"user",text:d.value}),n.value=!0,l.value="";try{const s=await C.post(`${j}/agent/chat`,d.value,{headers:{"Content-Type":"text/plain"},withCredentials:!0});c.value.push({sender:"agent",text:s.data.data}),d.value="",await a.fetchUserLibrary()}catch(s){let i="Error communicating with the agent.";s.response?.data?.status==="error"&&s.response?.data?.message?i=s.response.data.message:s.response?.data?i=s.response.data:s.message&&(i=s.message),c.value.push({sender:"agent",text:i})}finally{n.value=!1}}}const m=L();return(s,i)=>u(m).isOpen&&u(m).type==="agent_modal"?(r(),o("div",Pe,[e("div",Ge,[e("div",Ye,[e("div",Je,[i[3]||(i[3]=e("span",{class:"font-semibold text-[17px] text-[#009799]"},"Koob Agent",-1)),e("button",{class:"text-gray-400 hover:text-gray-600 text-xl cursor-pointer",onClick:i[0]||(i[0]=(...y)=>u(m).close&&u(m).close(...y))},[...i[2]||(i[2]=[e("span",{class:"material-symbols-outlined"},"close",-1)])])]),e("div",Qe,[(r(!0),o(T,null,I(c.value,(y,p)=>(r(),o("div",{key:p,class:S(["mb-3 flex",y.sender==="user"?"justify-end":"justify-start"])},[e("div",{class:S([y.sender==="user"?"bg-[#009799] text-white":"bg-gray-200 text-gray-800","rounded-lg px-4 py-2 max-w-[80%] text-[14px] font-normal break-words whitespace-pre-line"])},_(y.text),3)],2))),128)),n.value?(r(),o("div",We,[...i[4]||(i[4]=[e("div",{class:"bg-gray-200 text-gray-500 rounded-lg px-4 py-2 max-w-[80%] text-[14px] font-normal animate-pulse"}," Agent is typing... ",-1)])])):h("",!0)]),e("form",{class:"px-5 py-4 border-t border-gray-200 flex gap-2",onSubmit:N(b,["prevent"])},[A(e("input",{"onUpdate:modelValue":i[1]||(i[1]=y=>d.value=y),type:"text",class:"flex-1 border border-[#009799] rounded-sm h-[38px] px-3 outline-0 bg-white text-sm text-gray-800",placeholder:"Type your request...",disabled:n.value},null,8,Xe),[[z,d.value]]),e("button",{type:"submit",class:"bg-[#009799] text-white px-4 rounded font-medium text-sm h-[38px] flex items-center justify-center",disabled:n.value||!d.value.trim()},[...i[5]||(i[5]=[e("span",{class:"material-symbols-outlined"},"send",-1)])],8,Ze)],32)])])])):h("",!0)}},tt=$(et,[["__scopeId","data-v-9d6a1fb3"]]),st={key:0},ot={key:0},rt={class:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center"},at={class:"bg-white rounded-[10px] shadow-[0_0_0_2px_#009799] w-full max-w-[420px] flex flex-col"},lt={class:"px-4 pb-4"},nt={class:"text-[13px] text-gray-700 mb-6"},it={class:"font-medium text-[#009799]"},dt={class:"flex justify-between text-[13px]"},ut={key:1},ct={__name:"ConfirmDeleteModal",setup(g){const a=R(),c=E(),d=B(),n=L(),l=K(()=>n.data);async function b(m){const s=c.user?.id;if(!(!s||!m))try{await C.delete(`${j}/library/user/${s}/book/${m}`,{withCredentials:!0}),await a.fetchUserLibrary(),n.close(),d.showToast({message:"Book has been removed",type:"success",duration:5e3})}catch{d.showToast({message:"Error deleting book",type:"error",duration:5e3})}}return(m,s)=>u(n).isOpen&&u(n).type==="confirm_delete"?(r(),o("div",st,[l.value?(r(),o("div",ot,[e("div",rt,[e("div",at,[s[4]||(s[4]=e("div",{class:"flex p-2 px-3 bg-gray-100 text-[15px] items-center mb-2"},[e("span",{class:"material-symbols-outlined text-[#009799] text-4xl mr-2"},"delete_forever"),e("h2",{class:"font-semibold text-gray-900 text-center"},"Remove Book?")],-1)),e("div",lt,[e("p",nt,[s[2]||(s[2]=U(" You are about to remove ",-1)),e("span",it,_(l.value.book.title),1),s[3]||(s[3]=U(" from your library. This action cannot be undone. ",-1))]),e("div",dt,[e("button",{onClick:s[0]||(s[0]=(...i)=>u(n).close&&u(n).close(...i)),class:"mr-4 h-[32px] flex items-center justify-center text-center py-1 px-4 bg-white text-[#009799] rounded-[4px] border border-[#009799] hover:bg-[#efffff] cursor-pointer"}," Cancel "),e("button",{onClick:s[1]||(s[1]=i=>b(l.value.book.id)),class:"shadow-red-600 bg-red-600 text-white h-[32px] flex items-center justify-center text-center py-1 px-4 rounded-[4px] border border-red-600 hover:bg-red-500 cursor-pointer"}," Remove ")])])])])])):(r(),o("div",ut,[...s[5]||(s[5]=[e("p",null,"Book not defined",-1)])]))])):h("",!0)}},ft={__name:"DefaultLayout",setup(g){return(a,c)=>(r(),o("div",null,[e("div",null,[f(Ve),f(Ke),e("main",null,[f(u(P))])]),f(Ee),f(tt),f(ct)]))}};export{ft as default};
