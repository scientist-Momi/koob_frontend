import{r as m,u as D,z as B,s as M,d as T,i as g,A as h,w as U,c as n,o as i,b as t,j as w,k,m as P,t as l,B as F,F as V,h as R,p as J,f as z}from"./index-3GJAegEs.js";import{u as E,b as O,a as H}from"./modal-fVs73j7_.js";/* empty css                                                                  */import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={key:0},K={key:1},Q={key:0},W={class:"flex flex-col"},X={class:"px-5 py-2.5 min-h-[63px] flex justify-center border-b-[0.25px] border-gray-300 bg-gray-100 mb-5"},Y={class:"max-w-[1200px] flex items-center justify-between flex-wrap font-light w-full"},Z={class:"flex items-center gap-2.5 text-[15px]"},tt={class:"flex items-center"},et={class:"text-[15px] text-gray-800"},st={class:"flex items-center gap-2.5"},ot=["href"],at={class:"flex relative mx-[-20px] bg-white grow items-stretch"},nt={class:"w-2/4 pt-2.5 pr-[22px] pl-5"},it={class:"max-w-[578px] mr-0 w-full relative ml-auto"},lt={class:"min-h-[230px]"},rt={class:"w-full rounded-[6px] shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05),inset_0_1px_2px_0_rgba(78,83,90,0.1)] bg-gray-100 flex items-center justify-center mb-5"},dt=["src"],ut={key:1,class:"text-gray-500 text-sm"},pt={class:"min-h-[30px]"},xt={class:"flex items-center justify-between py-2.5"},ct={class:"w-full rounded-[6px] shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05),inset_0_1px_2px_0_rgba(78,83,90,0.1)] bg-white flex items-center justify-center mb-5 px-[15px] py-[20px] relative"},mt={class:"text-[13px] text-gray-700 font-light"},_t={key:0,class:"absolute left-1/2 z-40 w-full -translate-x-1/2 bg-white rounded-lg shadow-lg border border-gray-200 p-4"},bt={class:"flex justify-between items-center mb-2"},ft={class:"text-[13px] text-gray-700 whitespace-pre-line max-h-[300px] overflow-y-auto"},vt={class:"min-h-[30px]"},yt={class:"w-full rounded-[6px] shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05),inset_0_1px_2px_0_rgba(78,83,90,0.1)] bg-white flex items-center justify-center mb-5 px-[15px] py-[20px]"},gt={class:"text-[13px] text-gray-900 font-normal"},ht={class:"min-h-[30px]"},wt={class:"w-full rounded-[6px] shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05),inset_0_1px_2px_0_rgba(78,83,90,0.1)] bg-white flex items-center justify-between mb-5 px-[15px] py-[20px]"},kt={class:"flex items-center justify-center gap-1"},jt={class:"text-[13px] text-gray-900 font-normal"},St={class:"flex text-[13px] items-center gap-1.5 justify-center"},Ct={class:"w-2/4 pt-2.5 pl-[23px] pr-5 pb-5"},It={class:"max-w-[578px] mr-0 w-full relative"},Lt={class:"min-h-[30px]"},$t={class:"w-full rounded-[6px] shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05),inset_0_1px_2px_0_rgba(78,83,90,0.1)] bg-white flex items-center justify-center mb-5 px-[15px] py-[20px]"},At={class:"text-[13px] text-gray-900 font-normal"},Nt={class:"min-h-[30px]"},Dt={class:"w-full rounded-[6px] shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05),inset_0_1px_2px_0_rgba(78,83,90,0.1)] bg-white flex items-center justify-center mb-5 px-[15px] py-[20px]"},Bt={class:"text-[13px] text-gray-900 font-normal"},Mt={class:""},Tt={class:"w-full flex items-center mb-5 py-[20px]"},Ut={class:"flex flex-col"},Pt={class:"text-[13px] text-gray-400"},Ft=["datetime"],Vt={class:""},Rt={class:"flex-col"},Jt={class:"flex items-start"},zt={class:"w-15 h-15 mr-3 flex items-center justify-center bg-gray-100 rounded"},Et=["src"],Ot={key:1,class:"text-gray-400 text-xs"},Ht={class:"flex flex-col"},qt={class:"text-[15px] text-gray-800"},Gt={class:"text-[13px] text-gray-600 font-light"},Kt=["onClick"],Qt={key:1,class:"text-center text-gray-400 py-8 text-[15px]"},Wt={key:1},Xt={__name:"BookView",setup(Yt){const j=B(),S=J(),d=E(),u=m(!1),x=O(),C=D(),r=m([]),_=H(),c=m(!1),b=Number(j.params.id),s=M(()=>d.userLibrary.find(o=>o.book.id===b));T(async()=>{u.value=!0;try{const o=C.user?.id,e=await g.get(`${h}/books/user/${o}/book/${b}/recommendations`,{withCredentials:!0});r.value=e.data.data}catch{r.value=[]}d.userLibrary.length||await d.fetchUserLibrary(),await new Promise(o=>setTimeout(o,1e3)),u.value=!1});async function I(o){try{await g.post(`${h}/books/save`,o,{withCredentials:!0}),r.value=r.value.filter(e=>e.id!==o.id),await d.fetchUserLibrary(),_.showToast({message:"Book has been added",type:"success",duration:5e3})}catch{_.showToast({message:"Book could not be added, please try again",type:"error",duration:5e3})}}U(()=>u.value,o=>{o?x.open("loading"):x.close()},{immediate:!0});function f(o,e){return o?o.length>e?o.slice(0,e)+"...":o:""}function L(o){const e=new Date(o),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],y=e.getDate();let p=e.getHours();const A=e.getMinutes().toString().padStart(2,"0"),N=p>=12?"PM":"AM";return p=p%12||12,`${a} ${y} at ${p}:${A} ${N}`}const $=()=>{x.open("confirm_delete",s),S.push({name:"Dashboard"})};return(o,e)=>{const v=P("router-link");return u.value?(i(),n("div",G,[...e[2]||(e[2]=[t("span",null,"Loading...",-1)])])):(i(),n("div",K,[s.value?(i(),n("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[w(v,{to:{name:"Dashboard"},class:"flex items-center text-[#009799] gap-2 py-1.5 px-1 hover:bg-gray-200 rounded cursor-pointer"},{default:k(()=>[...e[3]||(e[3]=[t("span",{class:"material-symbols-outlined"}," home_storage ",-1),t("span",null,"Personal Library",-1)])]),_:1}),e[5]||(e[5]=t("span",{class:"material-symbols-outlined"}," chevron_right ",-1)),t("div",tt,[e[4]||(e[4]=t("div",{class:"w-8 mr-1 flex justify-center items-center"},[t("span",{class:"material-symbols-outlined text-[#009799]"}," split_scene_up ")],-1)),t("span",et,l(s.value.book.title),1)])]),t("div",st,[t("a",{href:s.value.book.infoLink,target:"_blank",class:"bg-white text-[13px] font-normal border rounded-sm py-1 px-3.5 text-[#009799] flex items-center justify-center gap-1 cursor-pointer hover:bg-gray-200"}," Open book ",8,ot),t("button",{onClick:$,class:"bg-white text-[13px] font-normal border rounded-sm py-1 px-3.5 text-red-700 flex items-center justify-center gap-1 cursor-pointer hover:bg-gray-200"}," Remove book ")])])]),t("div",at,[t("div",nt,[t("div",it,[t("div",lt,[e[6]||(e[6]=t("div",{class:"flex items-center py-2.5"},[t("span",{class:"text-[14px] text-gray-800 font-medium"},"Thumbnail")],-1)),t("div",rt,[s.value.book.thumbnailUrl?(i(),n("img",{key:0,src:s.value.book.thumbnailUrl,alt:"Book cover",class:"h-[300px] w-auto object-contain"},null,8,dt)):(i(),n("span",ut,"No image available"))])]),t("div",pt,[t("div",xt,[e[8]||(e[8]=t("span",{class:"text-[14px] text-gray-800 font-medium"},"Book summary",-1)),t("div",{class:"cursor-pointer hover:bg-gray-100 p-0.5",onClick:e[0]||(e[0]=a=>c.value=!0)},[...e[7]||(e[7]=[t("span",{class:"material-symbols-outlined a2"}," expand_content ",-1)])])]),t("div",ct,[t("span",mt,l(f(s.value.book.description,460)),1),w(F,{name:"fade"},{default:k(()=>[c.value?(i(),n("div",_t,[t("div",bt,[e[10]||(e[10]=t("h2",{class:"text-[14px] font-medium text-gray-800"},"Full Summary",-1)),t("button",{onClick:e[1]||(e[1]=a=>c.value=!1),class:"text-gray-500 hover:text-gray-700 cursor-pointer"},[...e[9]||(e[9]=[t("span",{class:"material-symbols-outlined a1"}," close ",-1)])])]),t("div",ft,l(s.value.book.description||"No description available."),1)])):z("",!0)]),_:1})])]),t("div",vt,[e[11]||(e[11]=t("div",{class:"flex items-center py-2.5"},[t("span",{class:"text-[14px] text-gray-800 font-medium"},"Authors")],-1)),t("div",yt,[t("span",gt,l(s.value.book.authors&&s.value.book.authors.length?s.value.book.authors.join(", "):"Unknown"),1)])]),t("div",ht,[e[14]||(e[14]=t("div",{class:"flex items-center py-2.5"},[t("span",{class:"text-[14px] text-gray-800 font-medium"},"Publisher and published date")],-1)),t("div",wt,[t("div",kt,[e[12]||(e[12]=t("span",{class:"material-symbols-outlined a3 text-gray-400"}," business_center ",-1)),t("span",jt,l(s.value.book.publisher),1)]),t("div",St,[e[13]||(e[13]=t("span",{class:"material-symbols-outlined a2 text-gray-500"}," date_range ",-1)),t("span",null,l(s.value.book.publishedDate),1)])])])])]),t("div",Ct,[t("div",It,[t("div",Lt,[e[15]||(e[15]=t("div",{class:"flex items-center py-2.5"},[t("span",{class:"text-[14px] text-gray-800 font-medium"},"Book subtitle")],-1)),t("div",$t,[t("span",At,l(s.value.book.subtitle?f(s.value.book.subtitle,60):"No subtitle available"),1)])]),t("div",Nt,[e[16]||(e[16]=t("div",{class:"flex items-center py-2.5"},[t("span",{class:"text-[14px] text-gray-800 font-medium"},"Page count")],-1)),t("div",Dt,[t("span",Bt,l(s.value.book.pageCount?s.value.book.pageCount:"Page count unavailable")+" pages ",1)])]),t("div",Mt,[e[19]||(e[19]=t("div",{class:"flex items-center py-2.5"},[t("span",{class:"text-[14px] text-gray-800 font-medium"},"Activities")],-1)),t("div",Tt,[e[18]||(e[18]=t("div",{class:"mr-[15px]"},[t("span",{class:"material-symbols-outlined a4"}," bookmark_added ")],-1)),t("div",Ut,[e[17]||(e[17]=t("div",{class:"text-[13px]"},[t("span",{class:"font-semibold"},"you: "),t("span",{class:"font-light text-green-600"},"New Book added to library.")],-1)),t("div",Pt,[t("time",{datetime:s.value.addedAt},l(L(s.value.addedAt)),9,Ft)])])])]),t("div",Vt,[e[21]||(e[21]=t("div",{class:"flex items-center py-2.5"},[t("span",{class:"text-[14px] text-gray-800 font-medium"},"Similar books")],-1)),t("div",Rt,[r.value.length?(i(!0),n(V,{key:0},R(r.value,a=>(i(),n("div",{key:a.id,class:"flex items-start justify-between mb-12"},[t("div",Jt,[t("div",zt,[a.volumeInfo.imageLinks&&a.volumeInfo.imageLinks.thumbnail?(i(),n("img",{key:0,src:a.volumeInfo.imageLinks.thumbnail,alt:"Similar book cover",class:"h-16 w-12 object-contain rounded"},null,8,Et)):(i(),n("span",Ot,"No image"))]),t("div",Ht,[t("div",qt,l(a.volumeInfo.title),1),t("div",Gt," by- "+l(a.volumeInfo.authors&&a.volumeInfo.authors.length?a.volumeInfo.authors.join(", "):"Unknown"),1)])]),t("button",{onClick:y=>I(a),class:"text-white px-3 py-1 text-xs cursor-pointer hover:bg-gray-100 flex items-center",title:"Add this book to your library"},[...e[20]||(e[20]=[t("span",{class:"material-symbols-outlined text-[#009799]"}," add_circle ",-1)])],8,Kt)]))),128)):(i(),n("div",Qt," No recommendations found. "))])])])])])])])):(i(),n("div",Wt,[...e[22]||(e[22]=[t("p",null,"Book not found.",-1)])]))]))}}},oe=q(Xt,[["__scopeId","data-v-9f4c2bea"]]);export{oe as default};
